<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Trung Thu</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background: #000010;
  }

  #rotateOverlay {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.9);
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 22px;
    z-index: 10000;
    text-align: center;
    padding: 20px;
  }

  #startBtn {
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%,-50%);
    padding: 15px 35px;
    background: #ffd966;
    color: #222;
    font-size: 26px;
    border-radius: 20px;
    font-weight: bold;
    cursor: pointer;
    z-index: 9999;
    display: none;
    box-shadow: 0 0 20px #ffdd77;
  }

  .moon {
    position: absolute;
    top: 40px;
    right: 80px;
    width: 200px;
    height: 200px;
    background: url("moon.png") no-repeat center/cover;
    border-radius: 50%;
    z-index: 1;
    box-shadow: 0 0 60px rgba(255,223,120,0.8);
  }

  .star {
    position: absolute;
    background: white;
    border-radius: 50%;
    opacity: 0.8;
    animation: twinkle 2s infinite alternate;
  }
  @keyframes twinkle {
    from {opacity: 0.2;}
    to {opacity: 1;}
  }

  .lantern {
    position: absolute;
    width: 120px;
    height: 160px;
    background: url("lantern.png") no-repeat center/contain;
    opacity: 0;
    cursor: pointer;
    z-index: 2;
    filter: brightness(1.8);
    transform: scale(1);
  }

  .message {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%,-50%);
    background: rgba(0,0,0,0.6);
    padding: 20px 30px;
    border-radius: 20px;
    font-size: 20px;
    color: #ffd966;
    display: none;
    z-index: 9999;
    max-width: 80%;
    text-align: center;
    font-weight: bold;
    box-shadow: 0 0 15px #ffd966;
  }
</style>
</head>
<body>
  <div id="rotateOverlay">ğŸ“± Vui lÃ²ng xoay ngang Ä‘iá»‡n thoáº¡i Ä‘á»ƒ tráº£i nghiá»‡m Ä‘Ãªm Trung Thu nhaa<3 </div>
  <div id="startBtn">Tráº£i nghiá»‡m </div>
  <div class="moon"></div>
  <div id="stars"></div>
  <div id="lanterns"></div>
  <div id="message" class="message"></div>

  <audio id="bgm">
    <source src="music.mp3" type="audio/mpeg">
  </audio>

<script>
const rotateOverlay = document.getElementById("rotateOverlay");
const startBtn = document.getElementById("startBtn");
const bgm = document.getElementById("bgm");
const lanternsContainer = document.getElementById("lanterns");
const messageBox = document.getElementById("message");

const wishes = [
  "ChÃºc báº¡n Tráº§n BÃ¬nh cÃ³ má»™t Ä‘Ãªm trung thu tháº­t an yÃªn, ngáº¯m trÄƒng sÃ¡ng vÃ  tháº¥y lÃ²ng mÃ¬nh nháº¹ nhÃ ng.",
  "Mong ráº±ng trung thu nÃ y mang Ä‘áº¿n cho báº¡n Tráº§n BÃ¬nh nhá»¯ng niá»m vui nhá» bÃ© nhÆ°ng trá»n váº¹n.",
  "Trung thu lÃ  dá»‹p sum váº§y, chÃºc báº¡n Tráº§n BÃ¬nh luÃ´n Ä‘Æ°á»£c á»Ÿ bÃªn nhá»¯ng ngÆ°á»i thÆ°Æ¡ng yÃªu.",
  "ChÃºc báº¡n Tráº§n BÃ¬nh cÃ³ nhá»¯ng Æ°á»›c mÆ¡ tháº­t Ä‘áº¹p dÆ°á»›i Ã¡nh trÄƒng ráº±m Ä‘Ãªm nay.",
  "Trung thu khÃ´ng chá»‰ cÃ³ bÃ¡nh, cÃ³ Ä‘Ã¨n, mÃ  cÃ²n cÃ³ nhá»¯ng khoáº£nh kháº¯c áº¥m Ã¡p â€“ chÃºc báº¡n Tráº§n BÃ¬nh giá»¯ mÃ£i Ä‘iá»u Ä‘Ã³.",
  "ChÃºc báº¡n Tráº§n BÃ¬nh luÃ´n cÆ°á»i tháº­t tÆ°Æ¡i, Ä‘á»ƒ Ã¡nh trÄƒng Ä‘Ãªm nay cÅ©ng pháº£i ghen tá»‹.",
  "Mong báº¡n Tráº§n BÃ¬nh nháº­n Ä‘Æ°á»£c nhiá»u sá»± quan tÃ¢m chÃ¢n thÃ nh, khÃ´ng chá»‰ trong trung thu nÃ y mÃ  cáº£ nÄƒm dÃ i.",
  "ChÃºc báº¡n Tráº§n BÃ¬nh cÃ³ má»™t trung thu Ä‘áº§y ká»· niá»‡m Ä‘áº¹p, Ä‘á»ƒ sau nÃ y nhá»› láº¡i sáº½ tháº¥y má»‰m cÆ°á»i.",
  "Hy vá»ng ráº±ng Ä‘Ãªm trung thu nÃ y, báº¡n Tráº§n BÃ¬nh sáº½ tháº¥y má»i Ä‘iá»u trá»Ÿ nÃªn dá»‹u dÃ ng hÆ¡n.",
  "ChÃºc báº¡n Tráº§n BÃ¬nh tÃ¬m tháº¥y sá»± bÃ¬nh yÃªn trong tá»«ng khoáº£nh kháº¯c, dÃ¹ lÃ  nhá» bÃ© nháº¥t.",
  "Ãnh trÄƒng hÃ´m nay tháº­t sÃ¡ng, mong ráº±ng ná»¥ cÆ°á»i cá»§a báº¡n Tráº§n BÃ¬nh cÅ©ng luÃ´n ráº¡ng rá»¡ nhÆ° tháº¿.",
  "Trung thu lÃ  mÃ¹a cá»§a sáº» chia, chÃºc báº¡n Tráº§n BÃ¬nh nháº­n Ä‘Æ°á»£c tháº­t nhiá»u Ä‘iá»u tá»‘t Ä‘áº¹p.",
  "ChÃºc báº¡n Tráº§n BÃ¬nh cÃ³ má»™t trÃ¡i tim áº¥m Ã¡p Ä‘á»ƒ luÃ´n tháº¥y cuá»™c sá»‘ng nÃ y dá»… thÆ°Æ¡ng hÆ¡n.",
  "Mong ráº±ng nhá»¯ng Æ°á»›c nguyá»‡n báº¡n Tráº§n BÃ¬nh tháº£ vÃ o Ä‘Ãªm trung thu nÃ y sáº½ sá»›m trá»Ÿ thÃ nh hiá»‡n thá»±c.",
  "ChÃºc báº¡n Tráº§n BÃ¬nh cÃ³ Ä‘á»§ an nhiÃªn Ä‘á»ƒ sá»‘ng háº¿t mÃ¬nh, vÃ  Ä‘á»§ niá»m vui Ä‘á»ƒ má»—i ngÃ y Ä‘á»u Ã½ nghÄ©a.",
  "Trung thu nÃ y, mong báº¡n Tráº§n BÃ¬nh sáº½ cáº£m nháº­n Ä‘Æ°á»£c sá»± bÃ¬nh dá»‹ mÃ  háº¡nh phÃºc tá»« nhá»¯ng Ä‘iá»u nhá» bÃ©.",
  "ChÃºc báº¡n Tráº§n BÃ¬nh má»™t Ä‘Ãªm ngáº¯m trÄƒng tháº­t Ä‘áº¹p, Ä‘á»ƒ tÃ¢m há»“n Ä‘Æ°á»£c láº¥p Ä‘áº§y sá»± dá»‹u dÃ ng.",
  "Mong báº¡n Tráº§n BÃ¬nh luÃ´n cÃ³ má»™t vÃ²ng trÃ²n bÃ¬nh yÃªn quanh mÃ¬nh, nhÆ° váº§ng trÄƒng Ä‘Ãªm nay.",
  "ChÃºc báº¡n Tráº§n BÃ¬nh giá»¯ mÃ£i sá»± há»“n nhiÃªn, dÃ¹ thá»i gian cÃ³ trÃ´i Ä‘i tháº¿ nÃ o.",
  "Mong ráº±ng má»—i trung thu vá», báº¡n Tráº§n BÃ¬nh sáº½ váº«n luÃ´n má»‰m cÆ°á»i vá»›i Ã¡nh trÄƒng, nhÆ° hÃ´m nay."
];

function checkOrientation() {
  if(window.innerWidth < window.innerHeight){
    rotateOverlay.style.display = "flex";
    startBtn.style.display = "none";
  } else {
    rotateOverlay.style.display = "none";
    startBtn.style.display = "block";
  }
}
window.addEventListener("resize", checkOrientation);
checkOrientation();

startBtn.addEventListener("click", () => {
  bgm.currentTime = 0;
  bgm.play();
  startBtn.style.display = "none";
  createStars(300);

  for(let i=0;i<40;i++){
    setTimeout(createLantern,i*800);
  }
  setInterval(createLantern,1000);
  autoReplayMusic();
});

function autoReplayMusic(){
  setInterval(()=>{
    bgm.currentTime = 0;
    bgm.play();
  },28000);
}

function createStars(count){
  const starsContainer = document.getElementById("stars");
  for(let i=0;i<count;i++){
    let star = document.createElement("div");
    star.className="star";
    const size=Math.random()*2+1;
    star.style.width=star.style.height=size+"px";
    star.style.top=Math.random()*window.innerHeight+"px";
    star.style.left=Math.random()*window.innerWidth+"px";
    star.style.animationDuration=(Math.random()*2+1)+"s";
    starsContainer.appendChild(star);
  }
}

// Click ngoÃ i Ä‘Ã¨n trá»i Ä‘á»ƒ áº©n lá»i chÃºc
document.body.addEventListener("click",(e)=>{
  if(!e.target.classList.contains("lantern")){
    messageBox.style.display="none";
  }
});

// Táº¡o Ä‘Ã¨n trá»i bay táº£n ngáº«u nhiÃªn, bay lÃ¢u, chá»‰ biáº¿n máº¥t gáº§n ra khá»i mÃ n hÃ¬nh
function createLantern(){
  const lantern=document.createElement("div");
  lantern.className="lantern";

  const startX=-150 + Math.random()*200;
  const startY=window.innerHeight + 50;
  lantern.style.left=startX+"px";
  lantern.style.top=startY+"px";
  lantern.style.opacity=0;
  lantern.style.transform="scale(1)";
  lanternsContainer.appendChild(lantern);

  let fadeIn=setInterval(()=>{
    let op=parseFloat(lantern.style.opacity);
    if(op<0.8) lantern.style.opacity=(op+0.05).toFixed(2);
    else clearInterval(fadeIn);
  },50);

  const startTime=performance.now();
  const baseDuration=30000; // bay lÃ¢u hÆ¡n
  const randomExtra=Math.random()*10000;
  const extraDelay=7000; 
  const duration=baseDuration + randomExtra + extraDelay;

  const targetX=Math.random()*(window.innerWidth-120);
  const targetY=Math.random()*(window.innerHeight/2);

  function animate(time){
    const elapsed=time-startTime;
    let progress=elapsed/duration;
    if(progress>1) progress=1;

    // bay táº£n ngáº«u nhiÃªn
    const x=startX + (targetX-startX)*progress + Math.sin(progress*10)*50;
    const y=startY + (targetY-startY)*progress + Math.sin(progress*7)*30;
    lantern.style.left=x+"px";
    lantern.style.top=y+"px";

    // Chá»‰ thu nhá» & má» khi progress > 0.95 (gáº§n ra khá»i mÃ n hÃ¬nh)
    if(progress>0.95){
      const p=(progress-0.95)/0.05;
      lantern.style.opacity=(0.8*(1-p)).toFixed(2);
      const scale=1-0.7*p;
      lantern.style.transform=`scale(${scale})`;
    }

    if(progress<1) requestAnimationFrame(animate);
    else lantern.remove();
  }
  requestAnimationFrame(animate);

  lantern.addEventListener("click",(e)=>{
    e.stopPropagation();
    const randomWish=wishes[Math.floor(Math.random()*wishes.length)];
    messageBox.innerText=randomWish;
    messageBox.style.display="block";
  });
}
</script>
</body>
</html>
